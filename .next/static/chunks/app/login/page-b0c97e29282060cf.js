(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{2455:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a.Z)("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]])},7216:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a.Z)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},9670:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a.Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},5589:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a.Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},1295:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},7081:function(e,t,s){Promise.resolve().then(s.bind(s,4925))},4925:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return N}});var a=s(7437),r=s(2265),l=s(4033),n=s(3023),o=s(1908),i=s(9583),c=s(6110),d=s(9581),u=s(1771),h=s(1349),m=s(5185),x=s(2455),f=s(1295),g=s(5589),p=s(7216),b=s(9670),y=s(8291),j=s(1396),w=s.n(j),v=s(1956);function N(){let e=(0,l.useRouter)(),t=(0,l.useSearchParams)(),{setAuth:s}=(0,h.a)(),[j,N]=(0,r.useState)({email:"",password:""}),[k,S]=(0,r.useState)(!1),[Z,{isLoading:D}]=(0,u.OQ)();(0,r.useEffect)(()=>{let s=t.get("message");"password-reset-success"===s&&(v.CF.success("Password Reset Successful","Your password has been updated. Please sign in with your new password."),e.replace("/login",void 0))},[t,e]);let I=async t=>{if(t.preventDefault(),!j.email.trim()||!j.password.trim()){v.CF.error("Validation Error","Please enter both email and password");return}try{let t=await Z(j).unwrap();console.log("✅ Login success:",t),s(t.accessToken,t.refreshToken,t.user),console.log("\uD83D\uDE80 Auth state updated, redirecting to dashboard..."),v.CF.success("Welcome back!","Successfully signed in as ".concat(t.user.userName||t.user.email)),setTimeout(()=>{window.location.reload(),e.push("/dashboard")},100)}catch(e){console.error("❌ Login failed:",e),(0,v.zG)(e,"Login failed. Please try again.")}};return(0,a.jsx)(m.Z,{children:(0,a.jsxs)("section",{className:"min-h-screen flex items-center justify-center bg-professional-dark relative overflow-hidden",children:[(0,a.jsxs)("div",{className:"absolute inset-0",children:[(0,a.jsx)("div",{className:"absolute top-1/4 right-1/4 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl animate-pulse"}),(0,a.jsx)("div",{className:"absolute bottom-1/4 left-1/4 w-96 h-96 bg-indigo-500/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}})]}),(0,a.jsx)("div",{className:"relative container-padding w-full max-w-lg animate-fade-in",children:D?(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)(d.Z,{size:64}),(0,a.jsx)("p",{className:"text-slate-400 text-lg",children:"Signing you in..."})]}):(0,a.jsxs)(c.Zb,{className:"bg-slate-900/90 backdrop-blur-xl border border-slate-700/60 shadow-2xl rounded-xl",children:[(0,a.jsxs)(c.Ol,{className:"text-center pb-8 pt-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500/20 to-indigo-500/20 rounded-2xl flex items-center justify-center mx-auto mb-6",children:(0,a.jsx)(x.Z,{className:"w-8 h-8 text-blue-400"})}),(0,a.jsx)(c.ll,{className:"text-3xl font-bold text-gradient-secondary mb-3",children:"Welcome Back"}),(0,a.jsx)(c.SZ,{className:"text-lg text-slate-400",children:"Sign in to your ForgeAPI account to continue building amazing APIs"})]}),(0,a.jsxs)(c.aY,{className:"space-y-6 pb-8",children:[(0,a.jsxs)("form",{onSubmit:I,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i._,{htmlFor:"email",className:"text-slate-300 font-medium",children:"Email Address"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(f.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),(0,a.jsx)(o.I,{id:"email",type:"email",placeholder:"Enter your email address",value:j.email,onChange:e=>N(t=>({...t,email:e.target.value})),className:"pl-12 h-12 bg-slate-800/80 border-slate-600/60 text-white placeholder:text-slate-400 focus:border-blue-500/60 focus:ring-blue-500/20 rounded-xl transition-all duration-200",required:!0})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i._,{htmlFor:"password",className:"text-slate-300 font-medium",children:"Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(g.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),(0,a.jsx)(o.I,{id:"password",type:k?"text":"password",placeholder:"Enter your password",value:j.password,onChange:e=>N(t=>({...t,password:e.target.value})),className:"pl-12 pr-12 h-12 bg-slate-800/80 border-slate-600/60 text-white placeholder:text-slate-400 focus:border-blue-500/60 focus:ring-blue-500/20 rounded-xl transition-all duration-200",required:!0}),(0,a.jsx)("button",{type:"button",onClick:()=>{S(!k)},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-white transition-colors",children:k?(0,a.jsx)(p.Z,{className:"w-5 h-5"}):(0,a.jsx)(b.Z,{className:"w-5 h-5"})})]})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsx)(w(),{href:"/forgot-password",className:"text-blue-400 hover:text-blue-300 text-sm font-medium transition-colors",children:"Forgot your password?"})}),(0,a.jsx)(n.z,{type:"submit",disabled:D||!j.email.trim()||!j.password.trim(),className:"w-full h-12 btn-primary text-lg font-semibold rounded-xl shadow-lg hover:shadow-blue-500/25 group",children:D?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.Z,{size:20}),(0,a.jsx)("span",{children:"Signing In..."})]}):(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:"Sign In"}),(0,a.jsx)(y.Z,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})})]}),(0,a.jsx)("div",{className:"pt-6 border-t border-slate-700/50",children:(0,a.jsx)("div",{className:"text-center space-y-4",children:(0,a.jsxs)("p",{className:"text-slate-400",children:["Don't have an account?"," ",(0,a.jsx)(w(),{href:"/signup",className:"text-blue-400 hover:text-blue-300 font-medium transition-colors",children:"Create one for free"})]})})})]})]})})]})})}},5185:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(7437),r=s(2265),l=s(4033),n=s(1349),o=s(9581);function i(e){let{children:t,redirectTo:s="/dashboard"}=e,{isAuthenticated:i,isLoading:c}=(0,n.a)(),d=(0,l.useRouter)();return((0,r.useEffect)(()=>{!c&&i&&(console.log("\uD83D\uDD04 User already authenticated, redirecting..."),d.replace(s))},[i,c,d,s]),c)?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-slate-950 to-purple-950 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)(o.Z,{size:64}),(0,a.jsx)("p",{className:"text-slate-400 text-lg",children:"Loading..."})]})}):i?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-slate-950 to-purple-950 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)(o.Z,{size:64}),(0,a.jsx)("p",{className:"text-slate-400 text-lg",children:"Redirecting to dashboard..."})]})}):(0,a.jsx)(a.Fragment,{children:t})}},1349:function(e,t,s){"use strict";s.d(t,{a:function(){return l}});var a=s(2265),r=s(4033);function l(){let[e,t]=(0,a.useState)({isAuthenticated:!1,user:null,isLoading:!0}),[s,l]=(0,a.useState)(0),n=(0,r.useRouter)(),o=e=>{try{let t=e.split(".")[1],s=t.replace(/-/g,"+").replace(/_/g,"/"),a=decodeURIComponent(atob(s).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join("")),r=JSON.parse(a),l=Date.now()/1e3;return r.exp<l}catch(e){return console.error("Error decoding token:",e),!0}},i=async()=>{let e=localStorage.getItem("accessToken"),t=localStorage.getItem("refreshToken"),s=localStorage.getItem("user");if(!e||!s)return!1;if(o(e)){if(console.warn("\uD83D\uDD04 Access token expired, attempting refresh..."),!t||o(t))return console.error("❌ Refresh token also expired or missing"),c(),!1;try{let e=await fetch("https://fogeapi-backend.onrender.com/api/user/refreshTokenApi",{method:"GET",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!e.ok)return console.error("❌ Token refresh failed"),c(),!1;{let t=await e.json();localStorage.setItem("accessToken",t.accessToken),localStorage.setItem("refreshToken",t.refreshToken),console.log("✅ Token refreshed successfully")}}catch(e){return console.error("❌ Error refreshing token:",e),c(),!1}}return!0},c=(0,a.useCallback)(()=>{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),t({isAuthenticated:!1,user:null,isLoading:!1}),l(e=>e+1)},[]),d=(0,a.useCallback)((e,s,a)=>{console.log("\uD83D\uDD04 Setting auth data:",{user:a}),localStorage.setItem("accessToken",e),localStorage.setItem("refreshToken",s),localStorage.setItem("user",JSON.stringify(a)),t({isAuthenticated:!0,user:{...a},isLoading:!1}),l(e=>e+1),console.log("✅ Auth state updated successfully")},[]),u=(0,a.useCallback)(()=>{c(),n.push("/login")},[c,n]);return(0,a.useEffect)(()=>{let e=async()=>{t(e=>({...e,isLoading:!0}));let e=await i();if(e){let e=localStorage.getItem("user");e?t({isAuthenticated:!0,user:JSON.parse(e),isLoading:!1}):c()}else c()};e()},[]),{...e,setAuth:d,logout:u,validateAuth:i,clearAuth:c,updateTrigger:s}}}},function(e){e.O(0,[237,396,583,123,971,864,744],function(){return e(e.s=7081)}),_N_E=e.O()}]);